!function(n,t){"function"==typeof define&&define.amd?define(function(){return n.off=t()}):"object"==typeof module&&module.exports?module.exports=n.off=t():n.off=t()}(this,function(){function n(n,t,o){var r=-1;return n.forEach(function(n,e){n.method===t&&n.context===o&&(r=e)}),r}var t=function(o){var r=[],e=[],c={};o=o||function(){};var u=function(){var n,t,o;return n=Array.prototype.slice.call(arguments,0),(t=e.some(function(t){return t.method.apply(t.context,n)}))?void 0:(o=u.func.apply(this,n),u.lock?u.lock=!1:(u.last=o,u._dispatch(o)),o)};return u._dispatch=function(n){r.forEach(function(t){n instanceof Function&&n._off?n.bind(t.method,t.context):t.method.call(t.context,n)})},u.before=function(t,o){return-1===n(e,t,o)&&e.push({method:t,context:o}),u},u.before.remove=function(t,o){var r=n(e,t,o);-1!==r&&e.splice(r,1)},u.add=function(t,o){return-1===n(r,t,o)&&r.push({method:t,context:o}),u},u.bind=function(n,t){void 0!==u.last&&n.call(t,u.last),u.add(n,t)},u.remove=function(t,o){var e=n(r,t,o);-1!==e&&r.splice(e,1)},u.override=function(n){var t=u.func;u.func=function(){var o=Array.prototype.slice.call(arguments,0);return o.unshift(t.bind(this)),n.apply(this,o)}},u.last=void 0,u.as=function(n){return c[n]=c[n]||t(u),c[n]},u._off=!0,u.func=o,u};return t.signal=function(){var n;return n=t(function(n){return n})},t.property=function(n){var o=t(function(n){return 1===arguments.length&&n!==o.last?n:(o.lock=!0,o.last)});return o.last=n,o},t.async=function(n){var o,r=t.signal();return o=t(function(){var t=[r].concat(Array.prototype.slice.call(arguments,0));return n.apply(this,t),r})},t.decorate=function(n){for(var o in n)"function"!=typeof n[o]||n[o]._off||(n[o]=t(n[o]));return n},t});